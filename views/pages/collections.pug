extends ../layout.pug
block content
    - var collections = collections || []
    .card-deck.mb-3.text-center
        .card.mb-4.shadow-sm
            .card-header
                h4.my-0.font-weight-normal Collections
            .card-body.text-left
                p.mb-3 Select the collections you want to export
                .form-check.mb-2
                    input.form-check-input(id='selectAll' type='checkbox', onclick='toggle(this)')
                    label.form-check-label(for="selectAll") Select all

                form(action="/collections" method="POST" enctype="multipart/form-data")
                    each collection in collections
                        .form-check
                            input.form-check-input(id=collection type='checkbox' name='collections' value=collection)
                            label.form-check-label(for=collection)=collection

                    .custom-control.custom-radio.custom-control-inline.mt-5
                        input#toCsv.custom-control-input(type='radio', name='format', value='csv' checked=true)
                        label.custom-control-label(for='toCsv') Return as CSV files
                    .custom-control.custom-radio.custom-control-inline
                        input#toJson.custom-control-input(type='radio', name='format', value='json')
                        label.custom-control-label(for='toJson') Return as JSON files

                    .form-group.text-center
                        button.btn.btn-primary(type='submit') Download &DownArrowBar;


block scripts
    script.
        function toggle(source) {
            let checkboxes = document.getElementsByName('collections');
            for(let i=0, n=checkboxes.length;i<n;i++) {
                checkboxes[i].checked = source.checked;
            }
        }